(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,a){e.exports={titleColor:"LoginPage_titleColor__1Hgd4"}},56:function(e,t,a){e.exports=a(92)},88:function(e,t){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(51),c=a(10),o=a(28);JSON.parse(localStorage.getItem("users"));var i=a(16),l=Object(i.a)(),u=a(15),E=a(53),A=a(54),m=a(2),S={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",CLEAR:"ALERT_CLEAR"},g={REGISTER_REQUEST:"USERS_REGISTER_REQUEST",REGISTER_SUCCESS:"USERS_REGISTER_SUCCESS",REGISTER_FAILURE:"USERS_REGISTER_FAILURE",LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT",GETALL_REQUEST:"USERS_GETALL_REQUEST",GETALL_SUCCESS:"USERS_GETALL_SUCCESS",GETALL_FAILURE:"USERS_GETALL_FAILURE",DELETE_REQUEST:"USERS_DELETE_REQUEST",DELETE_SUCCESS:"USERS_DELETE_SUCCESS",DELETE_FAILURE:"USERS_DELETE_FAILURE",ASSIGN_REQUEST:"ASSIGN_REQUEST",ASSIGN_SUCCESS:"ASSIGN_SUCCESS",ASSIGN_FAILURE:"ASSIGN_FAILURE",CHANGE_STATUS_REQUEST:"CHANGE_STATUS_REQUEST",CHANGE_STATUS_SUCCESS:"CHANGE_STATUS_SUCCESS",CHANGE_STATUS_FAILURE:"CHANGE_STATUS_FAILURE",GETUSER_REQUEST:"GETUSER_REQUEST",GETUSER_SUCCESS:"GETUSER_SUCCESS",GETUSER_FAILURE:"GETUSER_FAILURE"},d={GETALL_REQUEST:"TASKS_GETALL_REQUEST",GETALL_SUCCESS:"TASKS_GETALL_SUCCESS",GETALL_FAILURE:"TASKS_GETALL_FAILURE",CREATE_REQUEST:"TASKS_CREATE_REQUEST",CREATE_SUCCESS:"TASKS_CREATE_SUCCESS",CREATE_FAILURE:"TASKS_CREATE_FAILURE",DELETE_REQUEST:"TASKS_DELETE_REQUEST",DELETE_SUCCESS:"TASKS_DELETE_SUCCESS",DELETE_FAILURE:"TASKS_DELETE_FAILURE",STARTED_DRAGGING:"TASK_STARTED_DRAGGING",STARTED_DROPPED:"TASK_DROPPED"},p=JSON.parse(localStorage.getItem("user")),h=p?{loggedIn:!0,user:p}:{};var f=a(19);var T=Object(u.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case g.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user};case g.LOGIN_FAILURE:case g.LOGOUT:return{};case g.GETUSER_REQUEST:return Object(m.a)({},e,{loading:!0});case g.GETUSER_SUCCESS:return Object(m.a)({},e,{user:t.user,loading:!1});case g.GETUSER_FAILURE:return Object(m.a)({},e,{loading:!1,error:t.error});case g.CHANGE_STATUS_REQUEST:return Object(m.a)({},e,{loading:!0});case g.CHANGE_STATUS_SUCCESS:return Object(m.a)({},e,{loading:!1,user:Object(m.a)({},e.user,{tasks:e.user.tasks.map(function(e){return e._id===t.task._id?Object(m.a)({},t.task):e})})});case g.CHANGE_STATUS_FAILURE:return Object(m.a)({},e,{loading:!1});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case g.REGISTER_REQUEST:return{registering:!0};case g.REGISTER_SUCCESS:case g.REGISTER_FAILURE:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GETALL_REQUEST:return{loading:!0};case g.GETALL_SUCCESS:return{items:t.users};case g.GETALL_FAILURE:return{error:t.error};case g.DELETE_REQUEST:return Object(m.a)({},e,{items:e.items.map(function(e){return e.id===t.id?Object(m.a)({},e,{deleting:!0}):e})});case g.DELETE_SUCCESS:return{items:e.items.filter(function(e){return e.id!==t.id})};case g.DELETE_FAILURE:return Object(m.a)({},e,{items:e.items.map(function(e){if(e.id===t.id){e.deleting;var a=Object(f.a)(e,["deleting"]);return Object(m.a)({},a,{deleteError:t.error})}return e})});case g.ASSIGN_REQUEST:return Object(m.a)({},e,{loading:!0});case g.ASSIGN_SUCCESS:return Object(m.a)({},e,{loading:!1});case g.ASSIGN_FAILURE:return Object(m.a)({},e,{loading:!1,error:t.error});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.SUCCESS:return{type:"alert-success",message:t.message};case S.ERROR:return{type:"alert-danger",message:t.message};case S.CLEAR:return{};default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.GETALL_REQUEST:return{loading:!0};case d.GETALL_SUCCESS:return{items:t.tasks};case d.GETALL_FAILURE:return{loading:!1,error:t.error};case d.DELETE_REQUEST:return Object(m.a)({},e,{items:e.items.map(function(e){return e.id===t.id?Object(m.a)({},e,{deleting:!0}):e})});case d.DELETE_SUCCESS:return{items:e.items.filter(function(e){return e.id!==t.id})};case d.DELETE_FAILURE:return Object(m.a)({},e,{items:e.items.map(function(e){if(e.id===t.id){e.deleting;var a=Object(f.a)(e,["deleting"]);return Object(m.a)({},a,{deleteError:t.error})}return e})});case d.CREATE_REQUEST:return Object(m.a)({},e,{loading:!0});case d.CREATE_SUCCESS:return Object(m.a)({},e,{items:[t.task].concat(Object(o.a)(e.items)),loading:!1});case d.CREATE_FAILURE:return{error:t.error};case d.STARTED_DRAGGING:return Object(m.a)({},e,{draggedTask:t.task});case d.TASK_DROPPED:return Object(m.a)({},e,{draggedTask:null});default:return e}}}),R=Object(A.createLogger)(),C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,U=Object(u.e)(T,C(Object(u.a)(E.a,R)));function v(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var _=a(5),b=a(6),L=a(8),O=a(7),I=a(9),N=a(96),k=a(94),G={success:function(e){return{type:S.SUCCESS,message:e}},error:function(e){return{type:S.ERROR,message:e}},clear:function(){return{type:S.CLEAR}}};var y={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("".concat("https://mesi-react.herokuapp.com","/users/authenticate"),a).then(D).then(function(e){return e.token&&localStorage.setItem("user",JSON.stringify(e)),e})},logout:j,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat("https://mesi-react.herokuapp.com","/users/register"),t).then(D)},getAll:function(){var e={method:"GET",headers:v()};return fetch("".concat("https://mesi-react.herokuapp.com","/users"),e).then(D)},getById:function(e){var t={method:"GET",headers:v()};return fetch("".concat("https://mesi-react.herokuapp.com","/users/").concat(e),t).then(D)},update:function(e){var t={method:"PUT",headers:Object(m.a)({},v(),{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("".concat("https://mesi-react.herokuapp.com","/users/").concat(e.id),t).then(D)},delete:function(e){var t={method:"DELETE",headers:v()};return fetch("".concat("https://mesi-react.herokuapp.com","/users/").concat(e),t).then(D)},assign:function(e,t){var a={method:"POST",headers:Object(m.a)({},v(),{"Content-Type":"application/json"}),body:JSON.stringify({user:e,task:t})};return fetch("".concat("https://mesi-react.herokuapp.com","/users/task"),a).then(D)},changeStatus:function(e,t){var a={method:"PUT",headers:Object(m.a)({},v(),{"Content-Type":"application/json"}),body:JSON.stringify({user:e,task:t})};return fetch("".concat("https://mesi-react.herokuapp.com","/users/task/").concat(e._id),a).then(D)}};function j(){localStorage.removeItem("user")}function D(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&(j(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a})}var Q={getAll:function(){var e={method:"GET",headers:v()};return fetch("".concat("https://mesi-react.herokuapp.com","/tasks"),e).then(w)},createTask:function(e){var t={method:"POST",headers:Object(m.a)({"Content-Type":"application/json"},v()),body:JSON.stringify({summary:e})};return fetch("".concat("https://mesi-react.herokuapp.com","/tasks"),t).then(w)},delete:function(e){var t={method:"DELETE",headers:v()};return fetch("".concat("https://mesi-react.herokuapp.com","/tasks/").concat(e),t).then(w)}};function w(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&(y.logout(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a})}var F={getAll:function(){return function(e){e({type:d.GETALL_REQUEST}),Q.getAll().then(function(t){return e(function(e){return console.log("tasks service:",e),{type:d.GETALL_SUCCESS,tasks:e}}(t))},function(t){return e(function(e){return{type:d.GETALL_FAILURE,error:e}}(t.toString()))})}},createTask:function(e){return function(t){t(function(e){return{type:d.CREATE_REQUEST,summary:e}}(e)),Q.createTask(e).then(function(e){return t(function(e){return{type:d.CREATE_SUCCESS,task:e}}(e))},function(e){return t(function(e){return{type:d.CREATE_FAILURE,error:e}}(e.toString()))})}},delete:function(e){return function(t){t(function(e){return{type:d.DELETE_REQUEST,id:e}}(e)),Q.delete(e).then(function(){return t(function(e){return{type:d.DELETE_SUCCESS,id:e}}(e))},function(a){return t(function(e,t){return{type:d.DELETE_FAILURE,id:e,error:t}}(e,a.toString()))})}},taskStartedDragging:function(e){return{type:d.STARTED_DRAGGING,task:e}}};var M={login:function(e,t){return function(a){var n;a((n={username:e},{type:g.LOGIN_REQUEST,user:n})),y.login(e,t).then(function(e){a(function(e){return{type:g.LOGIN_SUCCESS,user:e}}(e)),"admin"===e.role?l.push("/admin"):l.push("/private")},function(e){a(function(e){return{type:g.LOGIN_FAILURE,error:e}}(e.toString())),a(G.error(e.toString()))})}},logout:function(){return y.logout(),{type:g.LOGOUT}},register:function(e){return function(t){t(function(e){return{type:g.REGISTER_REQUEST,user:e}}(e)),y.register(e).then(function(e){t(function(e){return{type:g.REGISTER_SUCCESS,user:e}}()),l.push("/login"),t(G.success("Registration successful"))},function(e){t(function(e){return{type:g.REGISTER_FAILURE,error:e}}(e.toString())),t(G.error(e.toString()))})}},getAll:H,getById:function(e){return function(t){return t(function(e){return{type:g.GETUSER_REQUEST,id:e}}({id:e})),y.getById(e).then(function(e){t(function(e){return{type:g.GETUSER_SUCCESS,user:e}}(e))},function(e){t(function(e){return{type:g.GETUSER_FAILURE,error:e}}(e.toString())),t(G.error(e.toString()))})}},delete:function(e){return function(t){t(function(e){return{type:g.DELETE_REQUEST,id:e}}(e)),y.delete(e).then(function(a){return t(function(e){return{type:g.DELETE_SUCCESS,id:e}}(e))},function(a){return t(function(e,t){return{type:g.DELETE_FAILURE,id:e,error:t}}(e,a.toString()))})}},assign:function(e,t){return function(a){a({type:g.ASSIGN_REQUEST}),y.assign(e,t).then(function(){a(F.getAll()),a(H()),a({type:g.ASSIGN_SUCCESS})},function(e){return a(function(e){return{type:g.ASSIGN_FAILURE,error:e}}(e.toString()))})}},changeStatus:function(e,t){var a=Object(m.a)({},t,{status:t.status>=2?0:t.status+1});return function(t){t({type:g.CHANGE_STATUS_REQUEST}),y.changeStatus(e,a).then(function(e){return t((a=e,{type:g.CHANGE_STATUS_SUCCESS,task:a}));var a},function(e){return t(function(e){return{type:g.CHANGE_STATUS_FAILURE,error:e}}(e.toString()))})}}};function H(){return function(e){e({type:g.GETALL_REQUEST}),y.getAll().then(function(t){return e(function(e){return{type:g.GETALL_SUCCESS,users:e}}(t))},function(t){return e(function(e){return{type:g.GETALL_FAILURE,error:e}}(t.toString()))})}}var K={getAll:function(){return function(e){e(M.getAll()),e(F.getAll())}}};var B=a(95),J=function(e){var t=e.component,a=Object(f.a)(e,["component"]);return r.a.createElement(k.a,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(B.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},x=a(93),P=function(e){function t(){return Object(_.a)(this,t),Object(L.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){"admin"===this.props.user.role?l.push("/admin"):l.push("/private")}},{key:"componentDidMount",value:function(){this.props.dispatch(M.getAll())}},{key:"handleDeleteUser",value:function(e){var t=this;return function(a){return t.props.dispatch(M.delete(e))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.users;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h1",null,"Hi ",a.firstName,"!"),r.a.createElement("p",null,"You're logged in with React!!"),r.a.createElement("h3",null,"All registered users:"),n.loading&&r.a.createElement("em",null,"Loading users..."),n.error&&r.a.createElement("span",{className:"text-danger"},"ERROR: ",n.error),n.items&&r.a.createElement("ul",null,n.items.map(function(t,a){return r.a.createElement("li",{key:t.id},t.firstName+" "+t.lastName,t.deleting?r.a.createElement("em",null," - Deleting..."):t.deleteError?r.a.createElement("span",{className:"text-danger"}," - ERROR: ",t.deleteError):r.a.createElement("span",null," - ",r.a.createElement("a",{href:!0,onClick:e.handleDeleteUser(t.id)},"Delete")))})),r.a.createElement("p",null,r.a.createElement(x.a,{to:"/login"},"Logout")))}}]),t}(r.a.Component);var Y=Object(c.b)(function(e){var t=e.users;return{user:e.authentication.user,users:t}})(P),W=a(13),z=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).onDragOver=function(e){e.stopPropagation(),e.preventDefault()},a.onDragEnter=function(e){e.stopPropagation()},a}return Object(I.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.assignTaskToUser;return r.a.createElement("div",{className:"col-xs-4",onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:function(e){return a(t,e)}},r.a.createElement("div",null,t.firstName+" "+t.lastName),r.a.createElement("div",{className:"well"},t.tasks&&t.tasks.length?t.tasks.map(function(e){var t=e._id,a=e.summary,n=e.status;return r.a.createElement("li",{key:t,draggable:"true"},a," ",n)}):"no tasks yet"))}}]),t}(r.a.Component),V=a(27),Z=a.n(V),q="".concat("https://mesi-react.herokuapp.com"),X=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(L.a)(this,Object(O.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(W.a)({},n,r))},a.handleAssignTaskToUser=function(e,t){t&&t.preventDefault(),a.props.assign(e,a.props.draggedTask)},a.deleteTask=function(e,t){var n=e._id;t&&t.preventDefault(),a.props.deleteTask(n)},a.dragStartHandler=function(e,t){a.props.taskStartedDragging(e),t.dataTransfer.setData("text",t.target.id)},a.save=function(e){e.preventDefault(),a.state.summary&&a.props.createTask(a.state.summary),a.setState({summary:""})},a.state={summary:"",response:!1,endpoint:q},Z()(q).on("status-change",function(){a.props.getAll()}),a}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.getAll()}},{key:"render",value:function(){var e=this,t=this.props,a=t.admin,n=t.users,s=t.tasks,c=this.state.summary;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hi ",a.firstName,"!"),r.a.createElement("form",null,r.a.createElement("input",{name:"summary",value:c,placeholder:"what is the task",onChange:this.handleInputChange}),r.a.createElement("button",{onClick:this.save},"Save")),r.a.createElement("hr",null),r.a.createElement("h3",null,"Unassigned tasks:"),s.loading&&r.a.createElement("em",null,"Loading tasks..."),s.error&&r.a.createElement("span",{className:"text-danger"},"ERROR: ",s.error),s.items&&s.items.length?r.a.createElement("ul",null,s.items.map(function(t,a){return r.a.createElement("li",{key:t.id,draggable:"true",onDragStart:function(a){return e.dragStartHandler(t,a)}},r.a.createElement("span",{className:"glyphicon glyphicon-th-list"})," ",t.summary,r.a.createElement("a",{href:"#top",onClick:function(a){return e.deleteTask(t,a)}},r.a.createElement("span",{className:"glyphicon glyphicon-remove"})))})):!s.loading&&s.items&&0===s.items.length&&"No tasks yet",r.a.createElement("hr",null),r.a.createElement("h3",null,"Developers:"),n.loading&&r.a.createElement("em",null,"Loading users..."),n.error&&r.a.createElement("span",{className:"text-danger"},"ERROR: ",n.error),n.items&&r.a.createElement("div",{className:"row"},n.items.filter(function(e){return"admin"!==e.role}).map(function(t,a){return r.a.createElement(z,{user:t,key:t.id,assignTaskToUser:e.handleAssignTaskToUser})})))}}]),t}(r.a.Component);var $={assign:M.assign,deleteTask:F.delete,taskStartedDragging:F.taskStartedDragging,createTask:F.createTask,getAll:K.getAll},ee=Object(c.b)(function(e){var t=e.users;return{admin:e.authentication.user,users:t,tasks:e.tasks,draggedTask:e.tasks.draggedTask}},$)(X),te=a(55),ae=a.n(te),ne=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(L.a)(this,Object(O.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(W.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),a.setState({submitted:!0});var t=a.state,n=t.username,r=t.password,s=a.props.dispatch;n&&r&&s(M.login(n,r))},a.props.dispatch(M.logout()),a.state={username:"",password:"",submitted:!1},a}return Object(I.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.loggingIn,t=this.state,a=t.username,n=t.password,s=t.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",{className:ae.a.titleColor},"Login"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(s&&!a?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:a,onChange:this.handleChange}),s&&!a&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(s&&!n?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:n,onChange:this.handleChange}),s&&!n&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),e&&r.a.createElement("img",{alt:"",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),r.a.createElement(x.a,{to:"/register",className:"btn btn-link"},"Register"))))}}]),t}(r.a.Component);var re=Object(c.b)(function(e){return{loggingIn:e.authentication.loggingIn}})(ne),se=a(14),ce=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(L.a)(this,Object(O.a)(t).call(this,e))).state={user:{firstName:"",lastName:"",username:"",password:"",role:"developer"},submitted:!1},a.handleChange=a.handleChange.bind(Object(se.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(se.a)(a)),a}return Object(I.a)(t,e),Object(b.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.state.user;"admin-check"===a&&(r.role=e.target.checked?"admin":"developer"),this.setState({user:Object(m.a)({},r,Object(W.a)({},a,n))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user,a=this.props.dispatch;t.firstName&&t.lastName&&t.username&&t.password&&a(M.register(t))}},{key:"render",value:function(){var e=this.props.registering,t=this.state,a=t.user,n=t.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(n&&!a.firstName?" has-error":"")},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"firstName",value:a.firstName,onChange:this.handleChange}),n&&!a.firstName&&r.a.createElement("div",{className:"help-block"},"First Name is required")),r.a.createElement("div",{className:"form-group"+(n&&!a.lastName?" has-error":"")},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"lastName",value:a.lastName,onChange:this.handleChange}),n&&!a.lastName&&r.a.createElement("div",{className:"help-block"},"Last Name is required")),r.a.createElement("div",{className:"form-group"+(n&&!a.username?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:a.username,onChange:this.handleChange}),n&&!a.username&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(n&&!a.password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a.password,onChange:this.handleChange}),n&&!a.password&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"admin-check"},"is Admin"),r.a.createElement("input",{type:"checkbox",className:"form-control",name:"admin-check",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),e&&r.a.createElement("img",{alt:"",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),r.a.createElement(x.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}}]),t}(r.a.Component);var oe=Object(c.b)(function(e){return{registering:e.registration.registering}})(ce),ie=function(e){function t(e){var a;Object(_.a)(this,t),(a=Object(L.a)(this,Object(O.a)(t).call(this,e))).changeStatus=function(e,t){return function(n){n.preventDefault(),(0,a.props.changeTaskStatus)(e,t)}},a.state={summary:"",response:!1,endpoint:"".concat("https://mesi-react.herokuapp.com")};var n=a.state.endpoint,r=a.props,s=r.getById,c=r.user._id;return Z()(n).on("task-assigned",function(){s(c)}),a}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.getById)(e.user._id)}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h1",null,"Hi ",t.firstName,"!"),r.a.createElement("p",null,"You're logged in with React!!"),r.a.createElement("h3",null,"Tasks for you:"),t.tasks&&t.tasks.length?r.a.createElement("ul",null,t.tasks.map(function(a){return r.a.createElement("li",{key:a._id},a.summary," ",r.a.createElement("a",{href:"/#",onClick:e.changeStatus(t,a)},0===a.status?"new":1===a.status?"in process":"done"))})):"No tasks yet",r.a.createElement("p",null,r.a.createElement(x.a,{to:"/login"},"Logout")))}}]),t}(r.a.Component);var le=Object(c.b)(function(e){return{user:e.authentication.user}},function(e){return{changeTaskStatus:function(t,a){return e(M.changeStatus(t,a))},getById:function(t){return e(M.getById(t))}}})(ie),ue=function(e){function t(){return Object(_.a)(this,t),Object(L.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){function e(e){return new RegExp(e,"g").test(window.location.href)?"active":""}return r.a.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#navbar","aria-expanded":"false","aria-controls":"navbar"},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"})),r.a.createElement("a",{className:"navbar-brand",href:"/"},"Mesi")),r.a.createElement("div",{id:"navbar",className:"navbar-collapse collapse"},r.a.createElement("ul",{className:"nav navbar-nav"},localStorage.getItem("user")&&"admin"===JSON.parse(localStorage.getItem("user")).role&&r.a.createElement("li",{className:e("admin")},r.a.createElement("a",{href:"#/admin"},"Admin")),localStorage.getItem("user")&&r.a.createElement("li",{className:e("private")},r.a.createElement("a",{href:"#/private"},"Private")),!localStorage.getItem("user")&&r.a.createElement("li",{className:e("login")},r.a.createElement("a",{href:"#/login"},"Login")),r.a.createElement("li",{className:e("register")},r.a.createElement("a",{href:"#/register"},"Register"))),r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},r.a.createElement("li",null,localStorage.getItem("user")&&r.a.createElement("a",{href:"#/login"},"Logout"))))))}}]),t}(r.a.Component),Ee=function(e){function t(e){var a;Object(_.a)(this,t);var n=(a=Object(L.a)(this,Object(O.a)(t).call(this,e))).props.dispatch;return l.listen(function(e,t){n(G.clear())}),a}return Object(I.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement(ue,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-sm-8 col-sm-offset-2"},e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(N.a,{history:l},r.a.createElement("div",null,r.a.createElement(J,{exact:!0,path:"/",component:Y}),r.a.createElement(J,{exact:!0,path:"/private",component:le}),r.a.createElement(J,{exact:!0,path:"/admin",component:ee}),r.a.createElement(k.a,{path:"/login",component:re}),r.a.createElement(k.a,{path:"/register",component:oe}))))))}}]),t}(r.a.Component);var Ae=Object(c.b)(function(e){return{alert:e.alert}})(Ee);a(91);Object(s.render)(r.a.createElement(c.a,{store:U},r.a.createElement(Ae,null)),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.beb23a20.chunk.js.map